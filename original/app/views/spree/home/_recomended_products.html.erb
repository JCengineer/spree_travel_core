  <% if !@recomended_product.nil? %>
     <div id="products_grid_home" class="row">
      <div class="title_group_products twelve">
        <ul>
          <li><%=image_tag('store/img_trans.gif', :size => "1x1", :class=>"left")%></li>
          <li><p><%= t('recomended') %></p></li>
          <%# taxon_programs = Spree::Taxon.find_by_permalink('categories/programs') %>
          <li><%=link_to image_tag('store/img_trans.gif', :size => "1x1", :class=>"rigth"), nested_taxons_path('categories/programs') %></li>
        </ul>
      </div>

      <div>
      <ul id="products_grid">
      <% @recomended_product.each do |product| %>
            <% t = ''
               if product.program?
                 t = 'programs'
               elsif product.accommodation?
                 t = 'accommodation'
               end
            %>
            <li id="product_element" class="container four columns">
              <ul>
                <li class="product_image">
                  <div id="home_recommend_image">
                    <% if !product.images.empty? %>
                      <%= link_to (image_tag product.images[0].attachment.url(:list)), product  %>
                    <% else %>
                      <%= image_tag('store/no_imagen_72x72.png', :width => '214', :height => '165') %>
                    <% end %>
                  </div>
                  <p class="product_name"> <%= link_to truncate(product.name.gsub(/<[^>]*>/,''), :length => 30, :omission => "..."), product %> </p>
                  <% if t == 'programs' %>
                      <p class="dias_parents"><%= get_property_value(product, 'programs-days') %> <%= t('days') %> | <%= my_destination(product, false, true) %></p>
                  <% else %>
                      <p class="dias_parents"><%= my_destination(product, false, true) %></p>
                  <% end %>
                </li>
                <li class="intermedio">
                  <%
                     data_context = variant_and_price_with_context(product, params, t)
                     variant = !data_context.nil? ? data_context['variant'] : nil
                     price = !data_context.nil? ? data_context['price'] : nil
                     values = !data_context.nil? ? data_context['customization'] : {}
                  %>
                  <ul class="info_icons">
                    <li class="columns alpha two">
                      <%= render(:partial => "spree/products/mini_cart_form", :locals => { :product => product, :variant => variant, :values => values, :params => params }) %>
                    </li>
                    <li>
                      <% category = get_category(product) %>
                      <ul class="opcionicon_price">
                        <% if t == 'programs' %>
                            <li id="opcionicon">
                                <% if get_vat(product, "#{category}-accommodation") %>
                                  <%= image_tag('store/img_trans.gif', :id => 'op1', :size => "1x1") %>
                                <% end %>
                                <% if get_vat(product, "#{category}-flight") %>
                                  <%= image_tag('store/img_trans.gif', :id => 'op2', :size => "1x1") %>
                                <% end %>
                                <% if get_vat(product, "#{category}-transfer") %>
                                  <%= image_tag('store/img_trans.gif', :id => 'op3', :size => "1x1") %>
                                <% end %>
                            </li>
                        <% elsif t == 'accommodation' %>
                            <li id="opcionicon" class="icon-stars-<%= product.product_properties.where(:property_id => Spree::Property.find_by_name('stars')).first.value %>"></li>
                        <% end %>
                        <li id="price">
                          <p> <%= price  %> </p> <label class="price_note"><%= '*' if (t == 'programs' && variant.adults == 1) || (t == 'accommodation' && variant.adults == 2) %></label>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li class="categorias_parents">
                    <% tx = product.taxons.where("permalink like 'categories%'").first %>
                    <p><%= Spree::Taxon.find_by_permalink("categories/#{tx.permalink.split('/')[1]}").name %> > <%=  tx.name %></p>
                </li>
              </ul>
              <div id="product_element_border" class="columns four"></div>
            </li>
      <% end %>
        <label class="price_note">*</label><p class="info_per_day"> <%= t('price_per_person_per_day_all') %></p>
      </ul>
      </div>
  <% end %>
  </div>

